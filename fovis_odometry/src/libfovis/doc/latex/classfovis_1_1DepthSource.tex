\hypertarget{classfovis_1_1DepthSource}{
\section{DepthSource Class Reference}
\label{classfovis_1_1DepthSource}\index{fovis::DepthSource@{fovis::DepthSource}}
}


Provides depth estimates for input image pixels.  


Inheritance diagram for DepthSource:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classfovis_1_1DepthSource}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual double \hyperlink{classfovis_1_1DepthSource_a22d76295f183f3ec9e34d2d7e837c675}{getBaseline} () const =0
\item 
virtual void \hyperlink{classfovis_1_1DepthSource_a0259f77a02ba85f5370407db4759d16a}{getXyz} (\hyperlink{classfovis_1_1OdometryFrame}{OdometryFrame} $\ast$frame)=0
\item 
virtual bool \hyperlink{classfovis_1_1DepthSource_ad0d2b9dd0e48e428319c3c84e87fa5cf}{haveXyz} (int u, int v)=0
\item 
virtual void \hyperlink{classfovis_1_1DepthSource_a4d6eafb84371d0720cd7ee53ac2e659a}{refineXyz} (\hyperlink{classfovis_1_1FeatureMatch}{FeatureMatch} $\ast$matches, int num\_\-matches, \hyperlink{classfovis_1_1OdometryFrame}{OdometryFrame} $\ast$frame)=0
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Provides depth estimates for input image pixels. 

A reliable source of depth estimates at as many pixels in an image as possible is crucial to producing useful visual odometry estimates. The \hyperlink{classfovis_1_1DepthSource}{DepthSource} class abstracts out the process of determining depth at each pixel.

\hyperlink{classfovis_1_1DepthSource}{DepthSource} is used in a lazy fashion. First, keypoints in the input image are identified. Next, keypoints without depth information are filtered out (pixels where \hyperlink{classfovis_1_1DepthSource_ad0d2b9dd0e48e428319c3c84e87fa5cf}{haveXyz()} returns false) and discarded. Later, the actual depth of the remaining keypoints is retrieved using \hyperlink{classfovis_1_1DepthSource_a0259f77a02ba85f5370407db4759d16a}{getXyz()}. Finally, after features are temporally matched across frames and their keypoint positions refined, \hyperlink{classfovis_1_1DepthSource}{DepthSource} is used again to refine the depth estimates of the refined keypoint image positions. 

\subsection{Member Function Documentation}
\hypertarget{classfovis_1_1DepthSource_ad0d2b9dd0e48e428319c3c84e87fa5cf}{
\index{fovis::DepthSource@{fovis::DepthSource}!haveXyz@{haveXyz}}
\index{haveXyz@{haveXyz}!fovis::DepthSource@{fovis::DepthSource}}
\subsubsection[{haveXyz}]{\setlength{\rightskip}{0pt plus 5cm}virtual bool haveXyz (
\begin{DoxyParamCaption}
\item[{int}]{u, }
\item[{int}]{v}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}pure virtual\mbox{]}}}}
\label{classfovis_1_1DepthSource_ad0d2b9dd0e48e428319c3c84e87fa5cf}
This should return true if it's not certain there's no depth at (u,v). It should be an inexpensive check that is used to avoid pointless (hah!) creation of keypoints. False positives are fine as ling as getXyz gets rid of them. 

Implemented in \hyperlink{classfovis_1_1DepthImage_ab94d0972d755837688cfc95aa144a6e1}{DepthImage}, \hyperlink{classfovis_1_1PrimeSenseDepth_af5915074d7b5e0694bcb0fae662c6c6c}{PrimeSenseDepth}, and \hyperlink{classfovis_1_1StereoDepth_ab94d0972d755837688cfc95aa144a6e1}{StereoDepth}.

\hypertarget{classfovis_1_1DepthSource_a0259f77a02ba85f5370407db4759d16a}{
\index{fovis::DepthSource@{fovis::DepthSource}!getXyz@{getXyz}}
\index{getXyz@{getXyz}!fovis::DepthSource@{fovis::DepthSource}}
\subsubsection[{getXyz}]{\setlength{\rightskip}{0pt plus 5cm}virtual void getXyz (
\begin{DoxyParamCaption}
\item[{{\bf OdometryFrame} $\ast$}]{frame}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}pure virtual\mbox{]}}}}
\label{classfovis_1_1DepthSource_a0259f77a02ba85f5370407db4759d16a}
Populate keypoints in frame with XYZ data. 

Implemented in \hyperlink{classfovis_1_1DepthImage_a0b83e0c45768e90787bc7f0c2c77606d}{DepthImage}, \hyperlink{classfovis_1_1PrimeSenseDepth_a9ba60dfd976745761bb861f08a374679}{PrimeSenseDepth}, and \hyperlink{classfovis_1_1StereoDepth_a0b83e0c45768e90787bc7f0c2c77606d}{StereoDepth}.

\hypertarget{classfovis_1_1DepthSource_a4d6eafb84371d0720cd7ee53ac2e659a}{
\index{fovis::DepthSource@{fovis::DepthSource}!refineXyz@{refineXyz}}
\index{refineXyz@{refineXyz}!fovis::DepthSource@{fovis::DepthSource}}
\subsubsection[{refineXyz}]{\setlength{\rightskip}{0pt plus 5cm}virtual void refineXyz (
\begin{DoxyParamCaption}
\item[{{\bf FeatureMatch} $\ast$}]{matches, }
\item[{int}]{num\_\-matches, }
\item[{{\bf OdometryFrame} $\ast$}]{frame}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}pure virtual\mbox{]}}}}
\label{classfovis_1_1DepthSource_a4d6eafb84371d0720cd7ee53ac2e659a}
Refine XYZ data of target keypoints in matches (usually after subpixel refinement of the matches across time). 

Implemented in \hyperlink{classfovis_1_1DepthImage_ad0922053f71946f74bc26225848010e6}{DepthImage}, \hyperlink{classfovis_1_1PrimeSenseDepth_a39e83560fd704306d53858d07d61621b}{PrimeSenseDepth}, and \hyperlink{classfovis_1_1StereoDepth_ad0922053f71946f74bc26225848010e6}{StereoDepth}.

\hypertarget{classfovis_1_1DepthSource_a22d76295f183f3ec9e34d2d7e837c675}{
\index{fovis::DepthSource@{fovis::DepthSource}!getBaseline@{getBaseline}}
\index{getBaseline@{getBaseline}!fovis::DepthSource@{fovis::DepthSource}}
\subsubsection[{getBaseline}]{\setlength{\rightskip}{0pt plus 5cm}virtual double getBaseline (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}pure virtual\mbox{]}}}}
\label{classfovis_1_1DepthSource_a22d76295f183f3ec9e34d2d7e837c675}
Return baseline of depth source, if applicable. If not applicable (e.g. for OpenNI devices) return 0. 

Implemented in \hyperlink{classfovis_1_1DepthImage_a5429ab9acd4e4f8d154c952ff95b1149}{DepthImage}, \hyperlink{classfovis_1_1PrimeSenseDepth_a1941b0a011e836e922ce08cf48c635f9}{PrimeSenseDepth}, and \hyperlink{classfovis_1_1StereoDepth_a5429ab9acd4e4f8d154c952ff95b1149}{StereoDepth}.



The documentation for this class was generated from the following file:\begin{DoxyCompactItemize}
\item 
depth\_\-source.hpp\end{DoxyCompactItemize}
